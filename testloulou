Project sae_bdd {
    database_type: 'PostgreSQL'
}

Table _region {
    code_region VARCHAR(3) [primary key]
    libelle_region VARCHAR(50) [unique]
}

Table _departement {
    code_departement VARCHAR(3) [primary key]
    nom_departement VARCHAR(50) [unique]
    code_region VARCHAR(3)
}

Table _commune {
    code_insee_de_la_commune VARCHAR(3) [primary key]
    nom_dep_la_commune VARCHAR(50) [unique]
    code_departement VARCHAR(50) [null]
}

Table _quartier_prioritaire {
    code_quartier_prioritaire VARCHAR(3) [primary key]
    nom_quartier_prioritaire VARCHAR(50) [unique]
}

Table _type {
    code_nature VARCHAR(50) [primary key]
    libelle_nature VARCHAR(50)
}

Table _academie {
    code_academie INTEGER [primary key]
    lib_academie VARCHAR(50) [unique]
}

Table _etablissement {
    uai INTEGER [primary key]
    nom_etablissement VARCHAR(50)
    secteur VARCHAR(50)
    code_postal VARCHAR(50)
    lattitude REAL
    longitude REAL
    code_academie INTEGER
    code_nat VARCHAR(50)
    code_commune VARCHAR(3)
}

Table _carac_tout_etablissement {
    effectifs INTEGER
    ips REAL
    ecart_type_de_l_ips REAL
    ep VARCHAR(50)
    uai VARCHAR(50)
    annee_scolaire VARCHAR(4)
}

Table _annee {
    annee_scolaire VARCHAR(4) [primary key]
}

Table _carac_college {
    nb_eleves_hors_segpa_hors_ulis INTEGER
    nb_eleves_segpa INTEGER
    nb_eleves_ulis INTEGER
    uai VARCHAR(50)
    annee_scolaire VARCHAR(50)
}

Table _classe {
    id_classe VARCHAR(50)
}

Table _a_proximite {
    uai VARCHAR(50)
    code_quartier_prioritaire VARCHAR(3)
}

Table _carac_selon_classe {
    nb_eleves_hors_segpa_hors_ulis_selon_niveau INTEGER
    nb_eleves_hors_segpa_selon_niveau INTEGER
    nb_eleves_ulis_selon_niveau INTEGER
    effectif_filles INTEGER
    effectif_gar√ßons INTEGER
    uai VARCHAR(50)
    annee_scolaire VARCHAR(4)
    classe VARCHAR(50)
}
// Long Form
Ref _carac_tout_etablissement_to_etablissement {
    _carac_tout_etablissement.uai < _etablissement.uai
}

Ref _carac_tout_etablissement_to_annee {
    _carac_tout_etablissement.annee_scolaire < _annee.annee_scolaire
}

Ref _carac_college_to_etablissement {
    _carac_college.uai < _etablissement.uai
}

Ref _carac_college_to_annee {
    _carac_college.annee_scolaire < _annee.annee_scolaire
}

Ref _departement_to_region {
    _departement.code_region < _region.code_region
}

Ref _commune_to_departement {
    _commune.code_departement < _departement.code_departement
}

Ref _etablissement_to_commune {
    _etablissement.code_commune < _commune.code_insee_de_la_commune
}

Ref _etablissement_to_type {
    _etablissement.code_nat < _type.code_nature
}

Ref _etablissement_to_academie {
    _etablissement.code_academie < _academie.code_academie
}

Ref _a_proximite_to_etablissement {
    _a_proximite.uai < _etablissement.uai
}

Ref _a_proximite_to_quartier_prioritaire {
    _a_proximite.code_quartier_prioritaire < _quartier_prioritaire.code_quartier_prioritaire
}

Ref _carac_selon_classe_to_etablissement {
    _carac_selon_classe.uai < _etablissement.uai
}

Ref _carac_selon_classe_to_annee {
    _carac_selon_classe.annee_scolaire < _annee.annee_scolaire
}

Ref _carac_selon_classe_to_classe {
    _carac_selon_classe.classe < _classe.id_classe
}
